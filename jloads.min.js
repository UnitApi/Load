var map={js:"js",css:"css",css2:"css",css3:"css",png:"img",bmp:"img",jpg:"img",gif:"img",htm:"html",html:"html",html5:"html",json:"json"},JLOADS_VERSION="1.1.1";function createCORSRequest(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t,!0):n=null,n}function each(e,t,n,o,r){var s=1;if(r)t(firstArray(e),0);else if(o)t(lastArray(e),-1);else for(var l in e)e.hasOwnProperty(l)&&(n<s||(s++,t(e[l],l)))}"function"!=typeof jlogs&&(jlogs=function(){var e=":: ";for(var t in arguments)e+=void 0===arguments[t]?"":"boolean"==typeof arguments[t]||"number"==typeof arguments[t]||"string"==typeof arguments[t]?arguments[t]:"object"==typeof arguments[t]?JSON.stringify(arguments[t]):xml2string(arguments[t]),e+=", ";return console.log(e),e}),"function"!=typeof err&&(err=function(){var e=":: ";for(var t in arguments)e+=arguments[t],e+=", ";return console.error(e),e}),jlogs("exist?","each");var firstArray=function(e){return e[e.length-1]},lastArray=function(e){return e.slice(-1)};function getFileExtension(e){return e.split("?")[0].split("#")[0].split(".").pop()}!function(p,n){"use strict";var o=function(){if(!(this instanceof o)){var e=new o;return e.init.call(e,Array.prototype.slice.call(arguments))}var l,t,s={includeEmptyValuedElements:!1,w3cSuccessfulControlsOnly:!1},c=/[^\[\]]+|\[\]/g,a=null;function i(e){if(e&&"object"==typeof e)return Object.keys(e).filter(function(e){return!isNaN(parseInt(e,10))}).splice(-1)[0]}function g(e){var t=i(e);return"string"==typeof t?parseInt(t,10)+1:0}function u(e){if("object"!=typeof e||null===e)return 0;var t,n=0;if("function"==typeof Object.keys)n=Object.keys(e).length;else for(t in e)e.hasOwnProperty(t)&&n++;return n}function f(e){return"INPUT"===e.nodeName&&"radio"===e.type}function d(e){return"INPUT"===e.nodeName&&"checkbox"===e.type}function j(e){return"SELECT"===e.nodeName&&"select-multiple"===e.type}function m(e){return e.checked}function y(e,t,n,o){var r,s=t[0];if(f(e))return!1!==n&&(o[s]=n);if(d(e)){if(!1===n)return;if(r=e.name,1<Array.prototype.filter.call(l,function(e){return e.name===r}).length)return o[s]||(o[s]=[]),o[s].push(n);o[s]=n}if(j(e)){if(!1===n)return;o[s]=n}return o[s]=n}return{init:function(e){return!(!e||"object"!=typeof e||!e[0])&&(t=e[0],void 0!==e[1]&&0<u(e[1])&&function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(s,e[1]),!!function(){switch(typeof t){case"string":a=n.getElementById(t);break;case"object":(e=t)&&"object"==typeof e&&"nodeType"in e&&1===e.nodeType&&(a=t)}var e;return a}()&&!!(l=a.querySelectorAll("input, textarea, select")).length&&function(){for(var e,t,n,o=0,r={},o=0;o<l.length;o++)!(t=l[o]).name||""===t.name||t.disabled||f(t)&&!m(t)||!1===(n=function(e){if(f(e))return!!m(e)&&e.value;if(d(e))return!!m(e)&&e.value;if("INPUT"===e.nodeName&&"file"===e.type)return!(!a.enctype||"multipart/form-data"!==a.enctype)&&(p.FileList&&e.files instanceof p.FileList&&0<e.files.length?e.files:!(!e.value||""===e.value)&&e.value);if("TEXTAREA"===e.nodeName)return!(!e.value||""===e.value)&&e.value;if("SELECT"===e.nodeName&&"select-one"===e.type)return e.value&&""!==e.value?e.value:!(!e.options||!e.options.length||""===e.options[0].value)&&e.options[0].value;if(j(e)){if(e.options&&0<e.options.length){var t=[];return function(e,t){if([].forEach)return[].forEach.call(e,t);for(var n=0;n<e.length;n++)t.call(e,e[n],n)}(e.options,function(e){e.selected&&t.push(e.value)}),(s.includeEmptyValuedElements||!!t.length)&&t}return!1}return"BUTTON"===e.nodeName&&"submit"===e.type?e.value&&""!==e.value?e.value:!(!e.innerText||""===e.innerText)&&e.innerText:void 0!==e.value&&(s.includeEmptyValuedElements||""!==e.value)&&e.value}(t))&&!s.includeEmptyValuedElements||(1===(e=t.name.match(c)).length&&y(t,e,n||"",r),1<e.length&&function e(t,n,o,r){var s,l=n[0];return 1<n.length?"[]"===l?(r[g(r)]={},e(t,n.splice(1,n.length),o,r["string"==typeof(s=i(r))?parseInt(s,10):0])):(r[l]&&0<u(r[l])||(r[l]={}),e(t,n.splice(1,n.length),o,r[l])):1===n.length?("[]"===l?r[g(r)]=o:y(t,n,o,r),r):void 0}(t,e,n||"",r));return 0<u(r)&&r}())}}};"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof module&&module.exports?module.exports=o:p.formToObject=o}(window,document),jlogs("exist?","getFileExtension"),jlogs("exist?","hasDomain");var hasDomain=function(e){return 0===e.indexOf("//")||0===e.indexOf("http://")||0===e.indexOf("https://")};function isArrayMany(e){return null!==e&&e instanceof Array&&1<Object.keys(e).length}function isArrayNotEmpty(e){return null!==e&&e instanceof Array&&0<Object.keys(e).length}function isArrayOne(e){return null!==e&&e instanceof Array&&1===Object.keys(e).length}function isArray(e){return null!==e&&e instanceof Array}function isBoolean(e){return null!==e&&"boolean"==typeof e}function isEmpty(e){return null==e||void 0===e||"string"==typeof e&&e.length<1||"object"==typeof e&&!(void 0!==e.innerText&&0!==e.innerText.length||void 0!==e.innerHTML&&0!==e.innerHTML.length)&&0===Object.keys(e).length}function isNumberGt(e,t){return null!==e&&"number"==typeof e&&t<e}function isNumberLt(e,t){return null!==e&&"number"==typeof e&&e<t}function isNumber(e){return null!==e&&"number"==typeof e}function isObject(e){return null!==e&&!(e instanceof Array)&&"object"==typeof e&&0<Object.keys(e).length}function isStringEncoded(e,t){return null!==e&&"string"==typeof e&&0<e.length}function isString(e,t){return null!==e&&"string"==typeof e&&0<e.length}function isString(e){return null!==e&&"string"==typeof e&&0<e.length}jlogs("exist?","isArrayMany"),jlogs("exist?","isArrayNotEmpty"),jlogs("exist?","isArrayOne"),jlogs("exist?","isArray"),jlogs("exist?","isBoolean"),jlogs("exist?","isEmpty"),jlogs("exist?","isNumberGt"),jlogs("exist?","isNumberLt"),jlogs("exist?","isNumber"),jlogs("exist?","isObject"),jlogs("exist?","isStringEncoded"),jlogs("exist?","isString"),jlogs("exist?","isString"),jlogs("exist?","time");var time=Date.now||function(){return+new Date};function getXHRObject(){var t=!1;try{t=new XMLHttpRequest}catch(e){for(var n=["MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],o=0;o<n.length;++o){try{t=new ActiveXObject(n[o])}catch(e){continue}break}}finally{return t}}function xml2string(e){return"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):e.xml?e.xml:void 0}jlogs("exist?","getXHRObject"),jlogs("exist?","E");var E=function(e,t,n,o){this.cfg={},this.cfg.area=document,this.cfg.selector=e,this.cfg.exist=!1,this.success="function"==typeof o?o:function(e){jlogs(this.constructor.name," Element func success(): ",e)},this.error="function"==typeof n?n:function(e){jlogs(this.constructor.name,"! Element func error(): ",e)},"string"!=typeof this.cfg.selector&&jlogs(this.constructor.name,"! Element selector: ",elem);var r=this;return r.selector=function(e){return r.cfg.selector=e,r},r.first=function(e,t){"function"!=typeof e&&(e=r.success),"function"!=typeof t&&(t=r.error),"string"!=typeof r.cfg.selector&&(r.cfg.exist=!1,t());var n=document.querySelector(r.cfg.selector);return jlogs(this.constructor.name," first self.cfg.selector ",r.cfg.selector),jlogs(this.constructor.name," first elem ",n),null!==n?(r.cfg.exist=!0,e(n)):(r.cfg.exist=!1,t()),n},r.all=function(e,t){"function"!=typeof t&&(t=r.success),"function"!=typeof e&&(e=r.error);var n=document.querySelectorAll(r.cfg.selector);return jlogs(this.constructor.name," all self.cfg.selector ",r.cfg.selector),jlogs(this.constructor.name," all elem ",n),null!==n?(r.cfg.exist=!0,t(n)):(r.cfg.exist=!1,e(n)),n},r};function getTarget(e){var t="getTarget";if("string"!=typeof e)return jlogs(t,"obj selector",e),e;if("html"===e)return document;jlogs(t,"str selector",e);var n=document.querySelectorAll(e)[0]||document.querySelectorAll(e)||document.getElementsByTagName("head")[0]||document.body;return jlogs(t,"target",n,typeof n),n}function onSelector(n,o){var r="onSelector";if(jlogs(r,"selector typeof",n,typeof n),"string"==typeof n){var e=document.querySelectorAll(n)[0]||document.querySelectorAll(n);return jlogs(r," elem ",e),isEmpty(e)?void waitFor(n,40,function(e){var t=document.querySelectorAll(e)[0]||document.querySelectorAll(e);return jlogs("onSelector waitFor selector",e),jlogs("onSelector waitFor document.querySelectorAll",document.querySelectorAll(e)),o(e,t)}):o(n,e)}jlogs(r,"elem NOT",n),n="body",document.addEventListener("DOMContentLoaded",function(e){var t=document.body;jlogs(r,"elem NOT DOMContentLoaded selector",n,t),jlogs(r,"elem NOT DOMContentLoaded elem",t),o(n,t)})}function waitForSelector(r,s,l,c,a){var i="jloadsTarget waitForSelector";if(isEmpty(r)||r.length<2)throw new Error("url not exits");if(isEmpty(s)||s.length<2)throw new Error("map not exits");try{jlogs(i," url: ",r),jlogs(i," selector: ",s),new MutationObserver(function(e,t){var n=new Load({target:s,success:c,error:a}),o=getFunctionName(r,l,i);return jlogs(i," funcName ",o),n[o](r),t.disconnect(),c(elem)}).observe(document,{childList:!0,subtree:!1})}catch(e){jlogs(i," getOne ERROR e ",e),a(e)}}function waitFor(e,t,n){if(jlogs("waitFor"," selector ",e),"object"==typeof document.querySelectorAll(e)&&0<document.querySelectorAll(e).length)return n(e);setTimeout(function(){waitFor(e,t,n)},t)}function includeHtml(e,t,n,o,r){var s="includeHtml";if("number"==typeof n&&1===n&&(n=!0),"function"!=typeof o&&(o=function(){jlogs(s," success ","included")}),"function"!=typeof r&&(r=function(){jlogs(s," error ","Page not found.")}),jlogs(s," url ",e),jlogs(s," includeHtml HTML target : ",t,getTarget(t)),100<e.length)return getTarget(t).insertAdjacentHTML("beforeend",e),o(this);if(e){var l=getXHRObject();return l.onreadystatechange=function(){jlogs(s," getXHRObject target: ",t),4==this.readyState&&loadHtmlByStatus(this.status,this.responseText,t,n,o,r)},l.open("GET",e,!0),l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),l.send(),this}return!1}function includeImage(o,r,e,t,n){var s="includeImage";if(jlogs(s," includeImg url: ",o),jlogs(s," includeImg target: ",r),"number"==typeof e&&1===e&&(e=!0),jlogs(s,"include Image replace: ",e),e)return jlogs(s,"includeImage getTarget(target): ",getTarget(r)),jlogs(s,"includeImage getTarget(target) firstChild: ",getTarget(r).firstChild),onSelector(r,function(e,t){jlogs(s,"onSelector insertAdjacentHTML selector, element ",e,r,t),getTarget(r).removeChild(getTarget(r).firstChild);var n=new Image;n.src=o,t.appendChild(n)}),t(this);onSelector(r,function(e,t){jlogs(s,"onSelector insertAdjacentHTML selector, element ",e,r,t);var n=new Image;n.src=o,t.appendChild(n)})}function includeScript(e,t,n,o,r){var s="includeScript";"number"==typeof n&&1===n&&(n=!0);var l=document.createElement("script");if(l.src=e,l.defer=!0,l.type="text/javascript",l.onerror=r,l.onload=o,l.onreadystatechange=o,n)return jlogs(s," replace getTarget(target): ",getTarget(t)),jlogs(s," replace getTarget(target) firstChild: ",getTarget(t).firstChild),onSelector(t,function(e,t){jlogs("onSelector includeScript target getTarget(target) selector element: ",e,t),getTarget(e).removeChild(getTarget(e).firstChild),getTarget(e).appendChild(l)}),o(this);onSelector(t,function(e,t){jlogs("onSelector includeScript target getTarget(target) selector element: ",e,t),getTarget(e).appendChild(l)})}function includeStyle(e,t,n,o,r){var s="includeStyle";"number"==typeof n&&1===n&&(n=!0);var l=document.createElement("link");if(l.href=e,l.rel="stylesheet",l.type="text/css",l.media="all",l.onerror=r,l.onload=o,l.onreadystatechange=o,n)return jlogs(s," replace getTarget(target): ",getTarget(t)),jlogs(s," replace getTarget(target) firstChild: ",getTarget(t).firstChild),onSelector(t,function(e,t){jlogs("onSelector includeStyle target, getTarget(target), selector, element ",e,t),getTarget(e).removeChild(getTarget(e).firstChild),getTarget(e).appendChild(l)}),o(this);onSelector(t,function(e,t){jlogs("onSelector includeStyle target, getTarget(target), selector, element ",e,t),getTarget(e).appendChild(l)})}function loadHtmlByStatus(e,n,o,r,t,s){var l="loadHtmlByStatus";return jlogs(l," includeHtml waiting for DOM tree ",o),200==e?(jlogs(l," includeHtml loaded: ",o),onSelector(o,function(e,t){jlogs(l,"onSelector insertAdjacentHTML selector, element ",e,o,t),r&&(jlogs(l,"replaced",r),t.innerHTML=""),t.insertAdjacentHTML("beforeend",n)}),t(this)):404==e?(getTarget(o).innerHTML="includeHtml Page not found.",s(this,e)):s(this)}function loadJsonByStatus(e,t,n,o,r){return 200==e?(jlogs("loadJsonByStatus"," loadJson loaded HTML: ",t),o(JSON.parse(t),n)):404==e?(getTarget(target).innerHTML="loadJson Page not found.",r(this,e)):r(t)}function loadJson(e,t,n){var o="loadJson";if("function"!=typeof t&&(t=function(){jlogs(o," success ","included")}),"function"!=typeof n&&(n=function(){jlogs(o," error ","Page not found.")}),jlogs(o," url ",e),5<e.length){var r=getXHRObject();return r.onreadystatechange=function(){4==this.readyState&&loadJsonByStatus(this.status,this.responseText,e,t,n)},r.open("GET",e,!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.send(),t(this)}return!1}function loadTextByStatus(e,t,n,o,r){return 200==e?(jlogs("loadTextByStatus"," loadText loaded: ",t),o(t,n)):404==e?(getTarget(target).innerHTML="loadText Page not found.",r(this,e)):r(t)}function loadText(e,t,n){var o="loadText";if("function"!=typeof t&&(t=function(){jlogs(o," success ","included")}),"function"!=typeof n&&(n=function(){jlogs(o," error ","Page not found.")}),jlogs(o," url ",e),5<e.length){var r=getXHRObject();return r.onreadystatechange=function(){4==this.readyState&&loadTextByStatus(this.status,this.responseText,e,t,n)},r.open("GET",e,!0),r.setRequestHeader("Content-type","application/text; charset=utf-8"),r.send(),t(this)}return!1}function getFunctionName(e,t,n){var o="getFunctionName / "+n;if(isEmpty(e)||e.length<2)throw new Error("url not exits");if(isEmpty(t)||t.length<2)throw new Error("map not exits");var r=getFileExtension(e);jlogs(o," url ",e),jlogs(o," ext ",r);var s=t[r];if(jlogs(o," result ",s),isEmpty(s))throw new Error("key or Value Is Empty or Key not exits in Map");return s}jlogs("exist?","eventResponse"),"function"!=typeof eventResponse&&(eventResponse=function(e,t,n){var o="jloadsEvent eventResponse";jlogs(o," selector ",e),jlogs(o," event ",t);var r=new RestForm(e,n,function(e){console.error("!FORM",e)},function(e){console.table("FORM success",e)});r.cfg({target:e,url:"//api.paas.info/index.php",method:"GET",event:"submit"}),r.url("localhost"===window.location.hostname?"//localhost:8000/index.php":"//php.jloads.com/index.php"),r.submit()}),jlogs("exist?","getTarget"),jlogs("exist?","jloadsEvent"),"function"!=typeof jloadsEvent&&(jloadsEvent=function(e,t,n,o){var r="jloadsEvent";"function"==typeof t||"object"==typeof t&&null!==t||(t=function(e){console.log(r," loaded ",e)}),"function"==typeof n||"object"==typeof n&&null!==n||(n=function(e){console.error(r," !loaded ",e)}),"object"!=typeof o&&"object"==typeof map&&(o=map),jlogs(" jloadsEvent"," json ",e,Object.keys(e).length,Object.keys(e)[0]),jlogs("jloadsEvent selectorEvent selector",c);var s=new Load({target:c,success:t,error:n});if(1===Object.keys(e).length){var l=e[c=Object.keys(e)[0]];selectorEvent(s,c,l,o,t,n)}else for(var c in e){l=e[c];selectorEvent(s,c,l,o,t,n)}return s}),jlogs("exist?","loadUrlData"),"function"!=typeof loadUrlData&&(loadUrlData=function(e,t,n,o,r){var s="jloadsEvent loadUrlData";if(jlogs(s," isArray object, elem, mapFunction",t,isArray(t),n),isArray(t)){var l,c;for(var a in t)if(jlogs(s," isArray"," id ",a),l=t[a],jlogs(s," isArray"," url ",l),"string"==typeof l)try{200<l.length?e.img(l):(c=getFunctionName(l,n,"loadUrlData"),jlogs(s," funcName ",c),e[c](l)),o(l)}catch(e){jlogs(s," ERROR e ",e),r(e)}}else jlogs(s," isArray ERROR object",t),r(t)}),jlogs("exist?","getTarget"),jlogs("exist?","ReadyHtml"),"function"!=typeof ReadyHtml&&(ReadyHtml=function(n,e,o,r,s){var t="jloadsTarget ReadyHtml";jlogs(t,"url:",n),jlogs(t,"selector:",e);var l=document.querySelectorAll(e)[0]||document.querySelectorAll(e);console.log(t," elem ",l);var c=new Load({target:e,success:r,error:s});if(!isEmpty(l)){var a=getFunctionName(n,o,"ReadyHtml");return jlogs(t," funcName ",a),c[a](n),r(l)}waitFor(e,40,function(e){var t=new Load({target:e,success:r,error:s});loadContentByUrls(t,n,o,r,s)})}),jlogs("exist?","selectorEventTarget"),"function"!=typeof selectorEventTarget&&(selectorEventTarget=function(e,t,n,o,r){var s,l,c,a,i="jloadsForm selectorEventTarget",g=Object.keys(n)[0];jlogs(i,"selector event target",e,t,g),0<g.indexOf(">")&&(s=g.split(">",2),l=s[0],c="append",a=s[1]),jlogs(i,"target_group, target_task, target_item",l,c,a),console.log(i," getTarget(selector)",e,getTarget(e)),"html"===e&&"onload"===t&&(t="DOMContentLoaded");try{void 0!==getTarget(e)?append(n,g,e,t,l,a,i):getTarget(e).addEventListener(t,function(){append(n,g,e,t,l,a,i)})}catch(e){jlogs(i," ERROR e ",e),r(e)}}),jlogs("exist?","selectorEvent"),"function"!=typeof selectorEvent&&(selectorEvent=function(e,t,n,o,r,s){var l="jloadsEvent selectorEvent";jlogs(l," event ",n),jlogs(l," selector ",t),document.addEventListener("DOMContentLoaded",function(){jlogs(l," addEventListener eventResponse"),eventResponse(t,n,function(e){console.log("xhr",e),AddMessage(e.status),AddMessage(e.statusText),AddMessage(e.response)})})}),jlogs("exist?","waitFor"),jlogs("exist?","includeHtml"),jlogs("exist?","includeImage"),jlogs("exist?","includeScript"),jlogs("exist?","includeStyle"),jlogs("exist?","loadContentByUrls"),"function"!=typeof loadContentByUrls&&(loadContentByUrls=function(e,t,n,o,r){var s="jloadsTarget loadContentByUrls";if(jlogs(s," isArray object: ",t),jlogs(s," isArray array: ",isArray(t)),isArray(t)){var l,c;for(var a in t)if(jlogs(s," isArray"," id ",a),l=t[a],jlogs(s," isArray"," url ",l),"string"==typeof l)try{200<l.length?e.img(l):(c=getFunctionName(l,n,"loadContentByUrls"),jlogs(s," funcName ",c),e[c](l)),o(l)}catch(e){jlogs(s," ERROR e ",e),r(e)}}else jlogs(s," isArray ERROR object",t),r(t)}),jlogs("exist?","loadHtmlByStatus"),jlogs("exist?","loadJsonByStatus"),jlogs("exist?","loadJson"),jlogs("exist?","loadTextByStatus"),jlogs("exist?","loadText"),jlogs("exist?","getFunctionName"),jlogs("exist?","getOne"),"function"!=typeof getOne&&(getOne=function(o,e,r,s,l,c){var a="jloadsTarget getOne";if(jlogs(a," load.getTarget() ",o.getTarget()),jlogs(a," load.isReplaceOn() ",o.isReplaceOn()),jlogs(a," selector ",r),jlogs(a," url 1",e,typeof e,isString(e),Object.keys(e).length),isArray(e)&&1===Object.keys(e).length&&isString(e[0])&&(e=e[0]),jlogs(a," url 2 ",e,typeof e,isString(e)),isString(e)){jlogs(a," wait for element selector ",r),jlogs(a," wait for element url ",e);var t=new Load({target:r,success:l,error:c,replace:0}),n=getFunctionName(e,s,a);jlogs(a," funcName ",n),t[n](e)}else{var i=e;if(jlogs(a," url4 ",e),jlogs(a," list ",i),jlogs(a," list isArray",isArray(i)),jlogs(a," list isObject",isObject(i)),isArray(i))for(var g in i){e=i[g];jlogs(a,"isArray url5 ",e),jlogs(a,"isArray list ",i),jlogs(a,"isArray selector ",r),getOne(o,e,r,s,l,c)}else isObject(i)&&(e=Object.keys(i)[0],jlogs(a,"isObject url5 ",e),jlogs(a,"isObject list ",i),jlogs(a,"isObject selector ",r),getOne(o,e,r,s,function(){for(var e in i){var t=i[e];for(var n in jlogs(a,"isObject url6 i ",e),jlogs(a,"isObject url6 object ",t),t)jlogs(a,"isObject url5 object[ii], ii ",t[n],n),getOne(o,t[n],r,s,l,c)}},c))}}),jlogs("exist?","Load");var Load=function(e){this.cfg={},this.cfg.env={},this.cfg.env_id=0,this.cfg.domain={},this.cfg.target="body",this.cfg.delay=0,this.cfg.cache=1,this.cfg.replace=0,this.cfg.success=0,this.cfg.error=0,isEmpty(e)||(isEmpty(e.env)||(this.cfg.env=e.env),isEmpty(e.env_id)||(this.cfg.env_id=e.env_id),isEmpty(e.domain)||(this.cfg.domain=e.domain),isEmpty(e.target)||(this.cfg.target=e.target),isEmpty(e.delay)||(this.cfg.delay=e.delay),isEmpty(e.cache)||(this.cfg.cache=e.cache),isEmpty(e.replace)||(this.cfg.replace=e.replace),isEmpty(e.success)||(success=e.success),isEmpty(e.error)||(error=e.error)),"function"==typeof success||"object"==typeof success&&null!==success||(success=function(e){console.log("Load"," loaded ",e)}),"function"==typeof error||"object"==typeof error&&null!==error||(error=function(e){console.error("Load"," !loaded ",e)}),this.success=success,this.error=error;var a=this;return a.env=function(e,t,n){return a.cfg.env_id++,a.cfg.env[a.cfg.env_id]={},a.cfg.env[a.cfg.env_id].domain=e,a.cfg.env[a.cfg.env_id].name=t,a.cfg.env[a.cfg.env_id].exist=n,a},a.hasEnv=function(){return"object"==typeof a.cfg.env&&void 0!==a.cfg.env[1]},a.hasDomain=function(){return!isEmpty(a.getDomain())},a.getEnv=function(e){if(jlogs(this.constructor.name,".getEnv() url: ",e),hasDomain(e))return jlogs(this.constructor.name," url has now own domain: ",e),{domain:""};if(a.hasEnv())for(var t in jlogs(this.constructor.name," url has env:",a.cfg.env),a.cfg.env)if(a.cfg.env.hasOwnProperty(t)){jlogs(this.constructor.name,".getEnv() function check: ",a.cfg.env[t].name);var n=a.cfg.env[t].exist;if("function"==typeof n&&n(a))return jlogs(this.constructor.name,".getEnv() url use env: ",a.cfg.env[t].name),a.cfg.env[t]}return a.getDomain()?(jlogs(this.constructor.name,".getEnv() cfg domain exist ",a.cfg.domain),{domain:a.getDomain()}):{domain:""}},a.getDomain=function(){if(isEmpty(a.cfg.domain))return jlogs(this.constructor.name,".getDomain() isEmpty"),!1;for(var e in a.cfg.domain)return jlogs(this.constructor.name,".getDomain() function check: ",e,a.cfg.domain),a.cfg.domain[e];return jlogs(this.constructor.name,".getDomain() for not"),!1},a.addDomain=function(e,t){var n={};return isEmpty(t)&&(t=time()),n[t]=e,Object.assign(a.cfg.domain,n),jlogs(this.constructor.name,".addDomain() cfg domain",a.cfg.domain),jlogs(this.constructor.name,".addDomain() cfg getDomain()",a.getDomain()),a},a.domain=function(e,t){return a.addDomain(e,t)},a.target=function(e){return a.cfg.target=e,a},a.getTarget=function(){return a.cfg.target},a.delay=function(e){return a.cfg.delay=e,this},a.cache=function(e){return a.cfg.cache=e,a},a.cacheOff=function(){return a.cfg.cache=0,a},a.cacheOn=function(){return a.cfg.cache=1,a},a.hasCache=function(){return"number"==typeof a.cfg.cache&&1!==a.cfg.cache},a.getSuffix=function(){var e="";return a.hasCache()&&(e="?"+time()),e},a.getEnvDomain=function(e){return a.getEnv(e).domain},a.getEnvUrl=function(e){return a.getEnvDomain(e)+e+a.getSuffix()},a.replace=function(e){return a.cfg.replace=e,a},a.replaceOff=function(){return a.cfg.replace=0,a},a.replaceOn=function(){return a.cfg.replace=1,a},a.isReplaceOn=function(){return 1==a.cfg.replace},a.getReplace=function(){return a.cfg.replace},a.loadJs=function(e,t,n,o){if("object"==typeof e){var r,s=e.length-1;for(var l in e){r=s==l,jlogs(this.constructor.name," js url.length ",s,l,r);var c=a.getEnvUrl(e[l]);jlogs(this.constructor.name," js script_url ",c);try{r?includeScript(c,t,a.cfg.replace,n,o):includeScript(c,t,a.cfg.replace),jlogs(this.constructor.name," js ",c)}catch(e){err("! js ",c,e)}}}else includeScript(a.getEnvUrl(e),t,a.cfg.replace,n,o);return a},a.js=function(e){return"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," js delayed ",a.cfg.delay,e),a.loadJs(e,a.cfg.target,a.success,a.error)},a.cfg.delay):(jlogs(this.constructor.name," js url ",e),a.loadJs(e,a.cfg.target,a.success,a.error)),a},a.javascript=a.js,a.script=a.js,a.loadCss=function(e,t,n,o){if("object"==typeof e)for(var r in e){var s=a.getEnvUrl(e[r]);jlogs(this.constructor.name," loadCss script_url ",s);try{var l=includeStyle(s,t,a.cfg.replace,n,o);jlogs(this.constructor.name," loadCss exe ",l)}catch(e){err("!load CSS ",s,e)}}else includeStyle(a.getEnvUrl(e),t,a.cfg.replace,n,o);return a},a.css=function(e){return"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," css delayed ",a.cfg.delay,e),a.loadCss(e,a.cfg.target,a.success,a.error)},a.cfg.delay):(jlogs(this.constructor.name," css loaded ",e),a.loadCss(e,a.cfg.target,a.success,a.error)),a},a.style=a.css,a.html=function(e){return jlogs(this.constructor.name," self.cfg.delay ",a.cfg.delay),"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," html delayed ",a.cfg.delay,e),a.loadHtml(e)},a.cfg.delay):(jlogs(this.constructor.name," html url ",e),a.loadHtml(e)),a},a.loadHtml=function(e){if(jlogs(this.constructor.name," self.cfg.target ",a.cfg.target),"object"==typeof e){var t,n=e.length-1;for(var o in e){t=n==o,jlogs(this.constructor.name," html url.length ",n,o,t);var r=a.getEnvUrl(e[o]);jlogs(this.constructor.name," html script_url ",r);try{includeHtml(r,a.cfg.target,a.cfg.replace,a.success,a.error),jlogs(this.constructor.name," html ",r)}catch(e){err("! html ",r,e)}}}else includeHtml(a.getEnvUrl(e),a.cfg.target,a.cfg.replace,a.success,a.error);return a},a.img=function(e){return"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," image delayed",a.cfg.delay,e),a.loadImage(e)},a.cfg.delay):(jlogs(this.constructor.name," image loaded ",e,a.cfg.delay),a.loadImage(e)),a},a.loadImage=function(e,t,n,o,r){if("object"==typeof e)for(var s in e){jlogs(this.constructor.name," img url[i]",e[s]);var l=a.getEnvUrl(e[s]);try{includeImage(l,a.cfg.target,a.cfg.replace,a.success,a.error),jlogs(this.constructor.name," img ",l)}catch(e){err("! img ",l,e)}}else includeImage(a.getEnvUrl(e),a.cfg.target,a.cfg.replace,a.success,a.error);return a},a.json=function(e){return jlogs(this.constructor.name," self.cfg.delay ",a.cfg.delay),"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," json delayed ",a.cfg.delay,e),a.loadJson(e)},a.cfg.delay):(jlogs(this.constructor.name," json url ",e),a.loadJson(e)),a},a.loadJson=function(e){if(jlogs(this.constructor.name," self.cfg.target ",a.cfg.target),"object"==typeof e){var t,n=e.length-1;for(var o in e){t=n==o,jlogs(this.constructor.name," json url.length ",n,o,t);var r=a.getEnvUrl(e[o]);jlogs(this.constructor.name," json script_url ",r);try{includeJson(r,a.cfg.target,a.cfg.replace,a.success,a.error),jlogs(this.constructor.name," json ",r)}catch(e){err("! json ",r,e)}}}else loadJson(a.getEnvUrl(e),a.cfg.target,a.cfg.replace,a.success,a.error);return a},a.text=function(e){return jlogs(this.constructor.name," self.cfg.delay ",a.cfg.delay),"number"==typeof a.cfg.delay&&1<a.cfg.delay?setTimeout(function(){jlogs(this.constructor.name," text delayed ",a.cfg.delay,e),a.loadJson(e)},a.cfg.delay):(jlogs(this.constructor.name," text url ",e),a.loadJson(e)),a},a.loadJson=function(e){if(jlogs(this.constructor.name," self.cfg.target ",a.cfg.target),"object"==typeof e){var t,n=e.length-1;for(var o in e){t=n==o,jlogs(this.constructor.name," text url.length ",n,o,t);var r=a.getEnvUrl(e[o]);jlogs(this.constructor.name," text script_url ",r);try{includeJson(r,a.cfg.target,a.cfg.replace,a.success,a.error),jlogs(this.constructor.name," text ",r)}catch(e){err("! text ",r,e)}}}else loadJson(a.getEnvUrl(e),a.cfg.target,a.cfg.replace,a.success,a.error);return a},a};function append(e,t,n,o,r,s,l){jlogs(l," addEventListener selector event",n,o),jlogs(l," addEventListener targets",e);var c=e[t];if(jlogs(l," first_target ",c),isArray(c))for(var a in c){jlogs(l," isArray"," id ",a);var i=c[a];jlogs(l," isArray"," obj ",i);var g=Object.keys(c[a])[0],u=c[a][g];jlogs(l," isArray"," name ",g),jlogs(l," isArray"," value ",u);var f="<"+s+' value="'+u+'" >';f+=u,f+="</"+s+">",jlogs(l," isArray"," responseText ",f),getTarget(r).insertAdjacentHTML("beforeend",f)}else jlogs(l," isArray ERROR object",n),error(n)}jlogs("exist?","jloadsForm"),"function"!=typeof jloadsForm&&(jloadsForm=function(e,n,o){var r="jloadsForm";if("function"==typeof n||"object"==typeof n&&null!==n||(n=function(e){console.log(r," loaded ",e)}),"function"==typeof o||"object"==typeof o&&null!==o||(o=function(e){console.error(r," !loaded ",e)}),jlogs(" jloadsForm"," json ",e,Object.keys(e).length,Object.keys(e)[0]),jlogs("jloadsForm Object.keys(json).length",Object.keys(e).length),1===Object.keys(e).length){var t=Object.keys(e)[0],s=t.split(":",2),l=s[0],c=s[1],a=e[t];jlogs("jloadsForm selector event targets",l,c,a),onSelector(l,function(e,t){jlogs(r,"elem wait DOMContentLoaded select element",e,t),selectorEventTarget(l,c,a,n,o)})}else for(var l in e)c=e[l]}),jlogs("exist?","selectorEvent1"),"function"!=typeof selectorEvent1&&(selectorEvent1=function(e,t,n,o,r,s){var l="jloadsForm selectorEvent1";jlogs(l," event ",n),jlogs(l," selector ",t),document.addEventListener("DOMContentLoaded",function(){jlogs(l," addEventListener eventResponse"),eventResponse(t,n,function(e){console.log("xhr",e),AddMessage(e.status),AddMessage(e.statusText),AddMessage(e.response)})})});var Message=function(e,t,n){var o="Message";this.selector=e||"body",this.message="",this.error=t,this.success=n;var r=this;return this.add=function(e){jlogs(o,e);var t=document.createElement("LI"),n=document.createTextNode(e);t.appendChild(n);try{jlogs(o,"self.selector",r.selector,getTarget(r.selector)),getTarget(r.selector).appendChild(t)}catch(e){console.error(e),console.error("handle element not exist for message")}},r},RestForm=function(e,n,r,s){var l="RestForm";this.cfg={},this.cfg.target=e,this.cfg.method="GET",this.cfg.url="",this.cfg.event="submit";var c=this;return c.method=function(e){return c.cfg.method=e,c},c.event=function(e){return c.cfg.event=e,c},c.url=function(e){return c.cfg.url=e,c},c.cfg=function(e){return void 0===e||("string"==typeof e.target&&(c.cfg.target=e.target),"string"==typeof e.method&&(c.cfg.method=e.method),"string"==typeof e.url&&(c.cfg.url=e.url),"string"==typeof e.event&&(c.cfg.event=e.event)),c},c.target=function(e){return c.cfg.target=e,c},c.submit=function(){c.cfg.element=new E(c.cfg.target),jlogs(l,".submit() self.cfg.target",c.cfg.target),jlogs(l,".submit() self.cfg.event",c.cfg.event),c.cfg.element.all("",function(e){for(var o=new Rest(c.cfg.url,"?",n,r,s),t=0;t<e.length;t++){e[t].addEventListener(c.cfg.event,function(e){e.preventDefault();var t=formToObject(this),n=t.method;delete t.method,delete t.submit,jlogs(l,n),o.byMethod(n,t),jlogs(l,t),s(e)})}})},c},Rest=function(e,t,n,o,r){this.url=e,this.separator="/",this.response=n,void 0!==t&&(this.separator=t),this.error=o,this.success=r;var s=this;return s.setUrl=function(e){return n.url=e,s},s.setSeparator=function(e){return s.separator=e,s},s.setResponse=function(e){return s.response=e,s},this.byMethod=function(e,t){var n;"GET"===e&&(n=t.id,s.get(n)),"POST"===e&&s.post(t),"PUT"===e&&(n=t.id,s.put(n,t)),"DELETE"===e&&(n=t.id,s.delete(n))},s.all=function(){var e=createCORSRequest("GET",s.url);if(!e)throw new Error("CORS not supported");return e.onload=function(){s.response(e,o,r)},e.send(null),s},s.get=function(e){var t=createCORSRequest("GET",s.url+s.separator+e);if(!t)throw new Error("CORS not supported");t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onload=function(){s.response(t,o,r)};try{t.send(null)}catch(e){err(e)}return s},s.post=function(e){var t=createCORSRequest("POST",s.url);if(!t)throw new Error("CORS not supported");t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onload=function(){s.response(t)};try{t.send(s.getJson(e))}catch(e){err(e)}return s},s.put=function(e,t){var n=createCORSRequest("PUT",s.url+s.separator+e);if(!n)throw new Error("CORS not supported");n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onload=function(){s.response(n,o,r)};try{n.send(s.getJson(t))}catch(e){err(e)}return s},s.delete=function(e){var t=createCORSRequest("DELETE",s.url+s.separator+e);if(!t)throw new Error("CORS not supported");t.setRequestHeader("Content-type","application/json; charset=utf-8"),t.onload=function(){s.response(t,o,r)};try{t.send(null)}catch(e){err(e)}return s},this.getJson=function(e){return JSON.stringify(e)},this};function urlLoad(e,t,n,o){var r="jloads.url urlLoad";if(!isString(window.location.hash))return!1;for(var s in t){var l=t[s];if(console.log(r,"!!!3",e.jloads,l,s),window.location.hash===s)for(var c in l){"head"===c||"body"===c||0!==c.indexOf("#")&&0!==c.indexOf(".")||(getTarget(c).innerHTML="");var a=new Load({target:c,success:n,error:o,replace:1});console.log(r,"!!!4 selector: ",c,a,e.mapFunction),jlogs(r," load.isReplaceOn() ",a.isReplaceOn());var i=l[c];console.log(r,"!!!4 url: ",i),getOne(a,i,c,e.mapFunction,n,o)}}return!0}jlogs("exist?","jloadsUrl"),"function"!=typeof jloadsUrl&&(jloadsUrl=function(e,t,n,o){var r="jloadsUrl";"function"==typeof t||"object"==typeof t&&null!==t||(t=function(e){console.log(r," loaded ",e)}),"function"==typeof n||"object"==typeof n&&null!==n||(n=function(e){console.error(r," !loaded ",e)}),"object"!=typeof o&&"object"==typeof map&&(o=map),jlogs(" jloadsUrl"," json ",e,Object.keys(e).length,Object.keys(e)[0]),jlogs("jloadsUrl getOne "," i ",l);var s=new Load({target:l,success:t,error:n,replace:1});if(jlogs(r," load.isReplaceOn() ",s.isReplaceOn()),1===Object.keys(e).length){var l=Object.keys(e)[0];getOne(s,e[l],l,o,t,n)}else for(var l in e){var c=e[l];getOne(s,c,l,o,t,n)}return s}),jlogs("exist?","jloads");var jloads=function(e){this.cfg={},isEmpty(e)&&(e={}),isEmpty(e.area)?this.cfg.area=document:this.cfg.area=e.area,isEmpty(e.selector)?this.cfg.selector="body":this.cfg.selector=e.selector,isEmpty(e.exist)?this.cfg.exist=!1:this.cfg.exist=e.exist;var s=null,s=isEmpty(e.success)?function(e){console.log("jloads"," loaded ",e)}:e.success,l=null,l=isEmpty(e.error)?function(e){console.error("jloads"," !loaded ",e)}:e.error;isEmpty(e.jloads)?this.jloads=new Load({target:this.cfg.selector,success:s,error:l}):this.jloads=e.jloads;var c=this;return c.selector=function(e){return c.cfg.selector=e,c},c.mapFunction=map,c.form=function(e,n,o){if(jlogs(" jloads.form"," json ",e,Object.keys(e).length,Object.keys(e)[0]),jlogs("jloads.form Object.keys(json).length",Object.keys(e).length),1===Object.keys(e).length){var t=Object.keys(e)[0],r=t.split(":",2),s=r[0],l=r[1],c=e[t];jlogs("jloads.form selector event targets",s,l,c),onSelector(s,function(e,t){jlogs("jloads.form","elem wait DOMContentLoaded select element",e,t),selectorEventTarget(s,l,c,n,o)})}else for(var s in e)l=e[s]},c.obj=function(t,e,n){if("string"==typeof t)try{if(2<t.length)return loadJson(t,e)}catch(e){return jlogs("jloads.obj"," ERROR e ",e),n(e,t)}return null},c.file=function(e){var t,n,o="jloads.file",r=Object.keys(e)[0];return jlogs(o," url ",r),1===Object.keys(e).length&&(t=new Load({target:"head",success:s,error:l}),n=getFunctionName(r,c.mapFunction,"self.file"),jlogs(o," funcName ",n,r),t[n](r)),c},c.event=function(e){if(jlogs("jloads.event"," json ",e,Object.keys(e).length,Object.keys(e)[0]),1===Object.keys(e).length){var t=e[n=Object.keys(e)[0]];selectorEvent(c.jloads,n,t,c.mapFunction,s,l)}else for(var n in e){t=e[n];selectorEvent(c.jloads,n,t,c.mapFunction,s,l)}return c},c.target=function(e){var t="jloads.target";for(var n in jlogs(t," json ",e,Object.keys(e).length,Object.keys(e)[0]),jlogs(t," json ",e),e){var o=e[n];getOne(c.jloads,o,n,c.mapFunction,s,l)}return c},c.url=function(t){var n="jloads.url";jlogs(n," json ",t,Object.keys(t).length,Object.keys(t)[0]);var e=Object.keys(t)[0];return jlogs(n," getOne "," i ",e),document.addEventListener("DOMContentLoaded",function(e){urlLoad(c,t,s,l)}),window.addEventListener("popstate",function(e){console.log(n,window.location.hash),console.log(n,c.jloads),urlLoad(c,t,s,l)}),c},c};jlogs("exist?","jl");var jl=new jloads;